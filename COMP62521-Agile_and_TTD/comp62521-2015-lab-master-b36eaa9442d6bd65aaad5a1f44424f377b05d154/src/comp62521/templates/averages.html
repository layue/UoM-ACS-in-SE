{% extends "base.html" %}
{% block title %}{{ args.title }}{% endblock %}
{% block content %}
<h1>{{ args.title }}</h1>
{% for table in args.tables %}
<h2>{{ table.title }}</h2>
<table id="datatable{{ loop.index }}" class="table table-bordered table-striped">
    <thead>
    <tr>
        {% for column in table.header %}
        <th style="vertical-align: middle"><a id="{{ column[-3:] }}" href="#" onclick="setField(this.id);">{{
            column[:-3] }}</a></th>
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% for row in table.rows %}
    <tr>
        {% for data_item in row %}
        <td>{{ data_item }}</td>
        {% endfor %}
    </tr>
    {% endfor %}
    </tbody>
</table>



<br/>

<div id="container{{ loop.index }}" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

<br/>

{% endfor %}

<form id="myForm" action="{{ args.url }}" method="GET">
    <input id="key" name="field" type="hidden" value="0a"/>
</form>

<script>

    function setField(field)
    {
        document.getElementById('key').value = field;
        document.getElementById('myForm').submit();
    }

    $(function ()
	{
	    $('#container1').highcharts({
	        data: {
	            table: 'datatable1'
	        },
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Statistics'
	        },
	        yAxis: {
	            allowDecimals: true,
	            title: {
	                text: 'Units'
	            }
	        },
	        tooltip: {
	            formatter: function () {
	                return '<b>' + this.series.name + '</b><br/>' +
	                    this.point.y + ' ' + this.point.name.toLowerCase();
	            }
	        }
	    });
	    $('#container2').highcharts({
	        data: {
	            table: 'datatable2'
	        },
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Statistics'
	        },
	        yAxis: {
	            allowDecimals: true,
	            title: {
	                text: 'Units'
	            }
	        },
	        tooltip: {
	            formatter: function () {
	                return '<b>' + this.series.name + '</b><br/>' +
	                    this.point.y + ' ' + this.point.name.toLowerCase();
	            }
	        }
	    });
	    $('#container3').highcharts({
	        data: {
	            table: 'datatable3'
	        },
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Statistics'
	        },
	        yAxis: {
	            allowDecimals: true,
	            title: {
	                text: 'Units'
	            }
	        },
	        tooltip: {
	            formatter: function () {
	                return '<b>' + this.series.name + '</b><br/>' +
	                    this.point.y + ' ' + this.point.name.toLowerCase();
	            }
	        }
	    });
	    $('#container4').highcharts({
	        data: {
	            table: 'datatable4'
	        },
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Statistics'
	        },
	        yAxis: {
	            allowDecimals: true,
	            title: {
	                text: 'Units'
	            }
	        },
	        tooltip: {
	            formatter: function () {
	                return '<b>' + this.series.name + '</b><br/>' +
	                    this.point.y + ' ' + this.point.name.toLowerCase();
	            }
	        }
	    });
	});


</script>

{% endblock %}
